(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fea"],{"3ce7":function(e,t,o){},"617e":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"table-list-page"},[o("techo-list",{ref:"list",attrs:{title:e.title,header:e.header,data:e.data,isShowCode:e.isShowCode,disCodeOption:e.disCodeOption,recordCount:e.recordCount},on:{onAdd:e.handleAdd,onPageChange:e.handlePageChange,onDelete:e.handleDelete,onView:e.handleView,onEdit:e.handleEdit,onTreeNode:e.handleTreeNode}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("el-row",{staticClass:"techo-list__header-row",attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:10}},[o("span",{staticClass:"techo-list__header-col-txt-4"},[e._v("姓名：")]),o("div",{staticClass:"techo-list__header-col-left-4"},[o("el-input",{staticClass:"techo-list__header-select-full",attrs:{placeholder:"请输入姓名",maxlength:10,size:"small",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1)]),o("el-col",{attrs:{span:9}}),o("el-col",{staticClass:"techo-list__header-col-button",attrs:{span:5}},[o("el-button",{staticClass:"techo-list__header-button-reset",attrs:{size:"small"},on:{click:e.handleClear}},[e._v("清空")]),o("el-button",{staticClass:"techo-list__header-button-query",attrs:{size:"small"},on:{click:e.handleQuery}},[e._v("查询")])],1)],1)],1)]),e.dlgVisible?o("techo-details",{ref:"details",attrs:{configKey:e.configKey,height:"60%",title:e.title}}):e._e(),o("vAddDialog",{ref:"vAddDialog",attrs:{disCodeOption:e.disCodeOption}})],1)},a=[],r=o("c93e"),s=(o("28a5"),o("eeb1")),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{staticClass:"add-dialog",attrs:{title:e.title,visible:e.dialogVisible,fullscreen:"",modal:!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基础信息",name:"first"}},[o("techo-people",{ref:"vBaseForm",attrs:{isAdd:e.isAdd,dic:e.dic},on:{onBasePeople:e.handleQueryBasePeople,onPosition:e.handlePosition}})],1),o("el-tab-pane",{attrs:{label:"位置信息",name:"second"}},[o("vPeoplePosition",{ref:"vPeoplePosition",attrs:{xingzhengqu:e.dic["行政区划"],disCodeOption:e.disCodeOption,isAdd:e.isAdd}})],1),o("el-tab-pane",{attrs:{label:"附加信息",name:"third"}},[o("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.teamRules,"label-width":"120px"}},[o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"矫正人员编号",prop:"redressNum"}},[o("el-input",{attrs:{maxlength:16,placeholder:"请填写矫正人员编号"},model:{value:e.dialogForm.redressNum,callback:function(t){e.$set(e.dialogForm,"redressNum",t)},expression:"dialogForm.redressNum"}})],1),o("el-form-item",{attrs:{label:"原羁押场所"}},[o("el-input",{attrs:{maxlength:25,placeholder:"请填写原羁押场所"},model:{value:e.dialogForm.originalPrison,callback:function(t){e.$set(e.dialogForm,"originalPrison",t)},expression:"dialogForm.originalPrison"}})],1),o("el-form-item",{attrs:{label:"矫正开始日期",prop:"redressStartDate"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期"},model:{value:e.dialogForm.redressStartDate,callback:function(t){e.$set(e.dialogForm,"redressStartDate",t)},expression:"dialogForm.redressStartDate"}})],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"具体罪名",prop:"specificCharges"}},[o("el-input",{attrs:{maxlength:25,placeholder:"请填写具体罪名"},model:{value:e.dialogForm.specificCharges,callback:function(t){e.$set(e.dialogForm,"specificCharges",t)},expression:"dialogForm.specificCharges"}})],1),o("el-form-item",{attrs:{label:"原判刑期",prop:"originalSentence"}},[o("el-input",{attrs:{maxlength:12,placeholder:"请填写原判刑期"},model:{value:e.dialogForm.originalSentence,callback:function(t){e.$set(e.dialogForm,"originalSentence",t)},expression:"dialogForm.originalSentence"}})],1),o("el-form-item",{attrs:{label:"矫正结束日期",prop:"redressEndDate"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期"},model:{value:e.dialogForm.redressEndDate,callback:function(t){e.$set(e.dialogForm,"redressEndDate",t)},expression:"dialogForm.redressEndDate"}})],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"矫正类别",prop:"redressType","label-width":"140px"}},[o("el-select",{attrs:{placeholder:"请选择矫正类别",clearable:""},model:{value:e.dialogForm.redressType,callback:function(t){e.$set(e.dialogForm,"redressType",t)},expression:"dialogForm.redressType"}},e._l(e.dic["矫正类别"],function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1),o("el-form-item",{attrs:{label:"原判刑期开始日期",prop:"originalStartDate","label-width":"140px"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期"},model:{value:e.dialogForm.originalStartDate,callback:function(t){e.$set(e.dialogForm,"originalStartDate",t)},expression:"dialogForm.originalStartDate"}})],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"案件类别",prop:"caseType","label-width":"140px"}},[o("el-cascader",{attrs:{placeholder:"请选择案件类别",options:e.dic["案件类别"],filterable:"",clearable:"",props:{value:"code"}},model:{value:e.dialogForm.caseType,callback:function(t){e.$set(e.dialogForm,"caseType",t)},expression:"dialogForm.caseType"}})],1),o("el-form-item",{attrs:{label:"原判刑期结束日期",prop:"originalEndDate","label-width":"140px"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期"},model:{value:e.dialogForm.originalEndDate,callback:function(t){e.$set(e.dialogForm,"originalEndDate",t)},expression:"dialogForm.originalEndDate"}})],1)],1)],1),o("div",{staticClass:"cut-apart-line"}),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"接收方式",prop:"receiveMethod"}},[o("el-select",{attrs:{placeholder:"请选择接收方式",clearable:""},model:{value:e.dialogForm.receiveMethod,callback:function(t){e.$set(e.dialogForm,"receiveMethod",t)},expression:"dialogForm.receiveMethod"}},e._l(e.dic["接收方式"],function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1),o("el-form-item",{attrs:{label:"是否惯犯",prop:"isrecidivist"}},[o("el-radio",{attrs:{label:1},model:{value:e.dialogForm.isrecidivist,callback:function(t){e.$set(e.dialogForm,"isrecidivist",t)},expression:"dialogForm.isrecidivist"}},[e._v("是")]),o("el-radio",{attrs:{label:0},model:{value:e.dialogForm.isrecidivist,callback:function(t){e.$set(e.dialogForm,"isrecidivist",t)},expression:"dialogForm.isrecidivist"}},[e._v("否")])],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"四史情况"}},[o("el-select",{attrs:{placeholder:"请选择'四史'情况",clearable:"",multiple:""},model:{value:e.dialogForm.fourSituation,callback:function(t){e.$set(e.dialogForm,"fourSituation",t)},expression:"dialogForm.fourSituation"}},e._l(e.dic["四史情况"],function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1),o("el-form-item",{attrs:{label:"是否建立矫正小组",prop:"isgroup","label-width":"140px"}},[o("el-radio",{attrs:{label:1},model:{value:e.dialogForm.isgroup,callback:function(t){e.$set(e.dialogForm,"isgroup",t)},expression:"dialogForm.isgroup"}},[e._v("是")]),o("el-radio",{attrs:{label:0},model:{value:e.dialogForm.isgroup,callback:function(t){e.$set(e.dialogForm,"isgroup",t)},expression:"dialogForm.isgroup"}},[e._v("否")])],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"三涉情况","label-width":"140px"}},[o("el-select",{attrs:{placeholder:"请选择'三涉'情况",clearable:"",multiple:""},model:{value:e.dialogForm.threeSituation,callback:function(t){e.$set(e.dialogForm,"threeSituation",t)},expression:"dialogForm.threeSituation"}},e._l(e.dic["三涉情况"],function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1),o("el-form-item",{attrs:{label:"矫正小组人员组成","label-width":"140px"}},[o("el-select",{attrs:{placeholder:"矫正小组人员组成类别",clearable:"",multiple:"",disabled:0==e.dialogForm.isgroup},model:{value:e.dialogForm.groupComponent,callback:function(t){e.$set(e.dialogForm,"groupComponent",t)},expression:"dialogForm.groupComponent"}},e._l(e.dic["矫正小组人员类型"],function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"矫正解除类型",prop:"redressLiftedType","label-width":"140px"}},[o("el-select",{attrs:{placeholder:"请选择矫正解除类型",clearable:""},model:{value:e.dialogForm.redressLiftedType,callback:function(t){e.$set(e.dialogForm,"redressLiftedType",t)},expression:"dialogForm.redressLiftedType"}},e._l(e.dic["矫正解除类型"],function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1)],1),o("div",{staticClass:"cut-apart-line"}),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"奖惩情况"}},[o("el-input",{attrs:{type:"textarea",rows:2,maxlength:1024,placeholder:"请填写奖惩情况"},model:{value:e.dialogForm.rewardsSituation,callback:function(t){e.$set(e.dialogForm,"rewardsSituation",t)},expression:"dialogForm.rewardsSituation"}})],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"刑罚变更执行"}},[o("el-input",{attrs:{type:"textarea",rows:2,maxlength:1024,placeholder:"请填写刑罚变更执行情况"},model:{value:e.dialogForm.penaltyChanges,callback:function(t){e.$set(e.dialogForm,"penaltyChanges",t)},expression:"dialogForm.penaltyChanges"}})],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"是否重新犯罪","label-width":"140px",prop:"iscrimeagin"}},[o("el-radio",{attrs:{label:1},model:{value:e.dialogForm.iscrimeagin,callback:function(t){e.$set(e.dialogForm,"iscrimeagin",t)},expression:"dialogForm.iscrimeagin"}},[e._v("是")]),o("el-radio",{attrs:{label:0},model:{value:e.dialogForm.iscrimeagin,callback:function(t){e.$set(e.dialogForm,"iscrimeagin",t)},expression:"dialogForm.iscrimeagin"}},[e._v("否")])],1)],1),o("el-col",{attrs:{span:6}},[1==e.dialogForm.iscrimeagin?o("el-form-item",{attrs:{label:"重新犯罪名称","label-width":"140px",prop:"crimeagainName"}},[o("el-input",{attrs:{maxlength:25,placeholder:"请填写重新犯罪名称"},model:{value:e.dialogForm.crimeagainName,callback:function(t){e.$set(e.dialogForm,"crimeagainName",t)},expression:"dialogForm.crimeagainName"}})],1):e._e()],1)],1),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"是否有脱管",prop:"ishosted"}},[o("el-radio",{attrs:{label:1},model:{value:e.dialogForm.ishosted,callback:function(t){e.$set(e.dialogForm,"ishosted",t)},expression:"dialogForm.ishosted"}},[e._v("是")]),o("el-radio",{attrs:{label:0},model:{value:e.dialogForm.ishosted,callback:function(t){e.$set(e.dialogForm,"ishosted",t)},expression:"dialogForm.ishosted"}},[e._v("否")])],1)],1),o("el-col",{attrs:{span:6}},[1==e.dialogForm.ishosted?o("el-form-item",{attrs:{label:"脱管原因",prop:"hostedReasons"}},[o("el-input",{attrs:{type:"textarea",rows:2,maxlength:1024,placeholder:"请填写脱管原因"},model:{value:e.dialogForm.hostedReasons,callback:function(t){e.$set(e.dialogForm,"hostedReasons",t)},expression:"dialogForm.hostedReasons"}})],1):e._e()],1),o("el-col",{attrs:{span:6}},[1==e.dialogForm.ishosted?o("el-form-item",{attrs:{label:"检查监督脱管情况","label-width":"140px",prop:"hostedSituation"}},[o("el-input",{attrs:{type:"textarea",rows:2,maxlength:1024,placeholder:"请填写检查监督脱管情况"},model:{value:e.dialogForm.hostedSituation,callback:function(t){e.$set(e.dialogForm,"hostedSituation",t)},expression:"dialogForm.hostedSituation"}})],1):e._e()],1),o("el-col",{attrs:{span:6}},[1==e.dialogForm.ishosted?o("el-form-item",{attrs:{label:"脱管纠正情况","label-width":"140px",prop:"hostedCorrectSituation"}},[o("el-input",{attrs:{type:"textarea",rows:2,maxlength:1024,placeholder:"请填写脱管纠正情况"},model:{value:e.dialogForm.hostedCorrectSituation,callback:function(t){e.$set(e.dialogForm,"hostedCorrectSituation",t)},expression:"dialogForm.hostedCorrectSituation"}})],1):e._e()],1)],1),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"是否有漏管",prop:"isdraintube"}},[o("el-radio",{attrs:{label:1},model:{value:e.dialogForm.isdraintube,callback:function(t){e.$set(e.dialogForm,"isdraintube",t)},expression:"dialogForm.isdraintube"}},[e._v("是")]),o("el-radio",{attrs:{label:0},model:{value:e.dialogForm.isdraintube,callback:function(t){e.$set(e.dialogForm,"isdraintube",t)},expression:"dialogForm.isdraintube"}},[e._v("否")])],1)],1),o("el-col",{attrs:{span:6}},[1==e.dialogForm.isdraintube?o("el-form-item",{attrs:{label:"漏管原因",prop:"draintubeReasons"}},[o("el-input",{attrs:{type:"textarea",rows:2,maxlength:1024,placeholder:"请填写漏管原因"},model:{value:e.dialogForm.draintubeReasons,callback:function(t){e.$set(e.dialogForm,"draintubeReasons",t)},expression:"dialogForm.draintubeReasons"}})],1):e._e()],1),o("el-col",{attrs:{span:6}},[1==e.dialogForm.isdraintube?o("el-form-item",{attrs:{label:"检查监督漏管情况","label-width":"140px",prop:"draintubeSituation"}},[o("el-input",{attrs:{disabled:0==e.dialogForm.isdraintube,type:"textarea",rows:2,maxlength:1024,placeholder:"请填写检查监督漏管情况"},model:{value:e.dialogForm.draintubeSituation,callback:function(t){e.$set(e.dialogForm,"draintubeSituation",t)},expression:"dialogForm.draintubeSituation"}})],1):e._e()],1),o("el-col",{attrs:{span:6}},[1==e.dialogForm.isdraintube?o("el-form-item",{attrs:{label:"漏管纠正情况","label-width":"140px",prop:"draintubeCorrectSituation"}},[o("el-input",{attrs:{disabled:0==e.dialogForm.isdraintube,type:"textarea",rows:2,maxlength:1024,placeholder:"请填写漏管纠正情况"},model:{value:e.dialogForm.draintubeCorrectSituation,callback:function(t){e.$set(e.dialogForm,"draintubeCorrectSituation",t)},expression:"dialogForm.draintubeCorrectSituation"}})],1):e._e()],1)],1)],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["first"==e.activeName?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.activeName="second"}}},[e._v("下一步")]):e._e(),"second"==e.activeName?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.activeName="first"}}},[e._v("上一步")]):e._e(),"second"==e.activeName?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.activeName="third"}}},[e._v("下一步")]):e._e(),"third"==e.activeName?o("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.resetForm}},[e._v("取消")]):e._e(),"third"==e.activeName?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.activeName="second"}}},[e._v("上一步")]):e._e(),"third"==e.activeName?o("el-button",{attrs:{type:"success",size:"small"},on:{click:e.submitForm}},[e._v("保存")]):e._e()],1)],1)},n=[],d=(o("7f7f"),o("ac6a"),o("3fe9")),c={props:{disCodeOption:{type:Array,default:[]}},components:{vPeoplePosition:d["a"]},data:function(){return{dialogVisible:!1,isAdd:!0,title:"",activeName:"first",dic:{"性别":[],"民族":[],"婚姻状况":[],"政治面貌":[],"学历":[],"宗教信仰":[],"职业类别":[],"矫正类别":[],"案件类别":[],"接收方式":[],"四史情况":[],"三涉情况":[],"矫正小组人员类型":[],"矫正解除类型":[],"行政区划":[]},dialogForm:{isrecidivist:0,isgroup:1,ishosted:0,isdraintube:0,iscrimeagin:0,groupComponent:[],fourSituation:[],threeSituation:[]},teamRules:{redressNum:[{required:!0,message:"请输入社区矫正人员编号",trigger:"blur"},{min:2,max:16,message:"长度在 2 到 16 个字符",trigger:"blur"}],redressType:[{required:!0,message:"请选择矫正类别",trigger:"change"}],caseType:[{required:!0,message:"请选择案件类别",trigger:"change"}],specificCharges:[{required:!0,message:"请输入具体罪名",trigger:"blur"},{min:2,max:25,message:"长度在 2 到 25 个字符",trigger:"blur"}],redressStartDate:[{required:!0,message:"请选择矫正开始日期",trigger:"change"}],redressEndDate:[{required:!0,message:"请选择矫正结束日期",trigger:"change"}],receiveMethod:[{required:!0,message:"请选择接收方式",trigger:"change"}],crimeagainName:[{required:!0,message:"请填写重新犯罪名称",trigger:"blur"}],hostedReasons:[{required:!0,message:"请填写托管原因",trigger:"blur"}],hostedSituation:[{required:!0,message:"请填写检查监督脱管情况",trigger:"blur"}],hostedCorrectSituation:[{required:!0,message:"请填写脱管纠正情况",trigger:"blur"}],draintubeReasons:[{required:!0,message:"请填写漏管原因",trigger:"blur"}],draintubeSituation:[{required:!0,message:"请填写检查监督漏管情况",trigger:"blur"}],draintubeCorrectSituation:[{required:!0,message:"请填写漏管纠正情况",trigger:"blur"}]},houseInfo:{}}},created:function(){var e=this;s["a"].requestDicCatalog(function(t){var o=_.keys(e.dic);_.map(t,function(t){-1!=_.indexOf(o,t.name)&&s["a"].requestDicType(t.id,function(o){"职业类别"==t.name?e.dic[t.name]=e.handleTreeData(o):"案件类别"==t.name?e.dic[t.name]=e.handleCaseTypeTree(o):e.dic[t.name]=o})})})},watch:{activeName:function(e){var t=this;"second"==e?(this.$refs["vBaseForm"].baseForm.id&&s["a"].requestBaseIdByPeople("people/comcor/findPage",this.$refs["vBaseForm"].baseForm.id,function(e){0!=e.totalCount&&(t.isAdd=!1,t.dialogForm=e.list[0])}),this.$refs["vBaseForm"].$refs["baseForm"].validate(function(e){e||t.$nextTick(function(){t.activeName="first"})}),this.$refs["vPeoplePosition"].$refs["houseItem"]&&this.$refs["vPeoplePosition"].$refs["houseItem"].initGridData(),this.$refs["vPeoplePosition"].$refs["liveHouseItem"]&&this.$refs["vPeoplePosition"].$refs["liveHouseItem"].initGridData()):"third"==e&&new Promise(function(e,o){1==t.$refs["vPeoplePosition"].showHujiForm?(t.$refs["vPeoplePosition"].$refs["houseItem"].$refs["houseItem"].validate(function(e){e||t.$nextTick(function(){t.activeName="second"})}),t.houseInfo=t.$refs["vPeoplePosition"].$refs["houseItem"].houseInfo,e()):s["a"].requestHouseInfo(t.$refs["vBaseForm"].baseForm.houseId,function(o){t.houseInfo=o,e()}),1==t.$refs["vPeoplePosition"].showXianzhuForm&&t.$refs["vPeoplePosition"].$refs["liveHouseItem"].$refs["liveHouseItem"].validate(function(e){e||t.$nextTick(function(){t.activeName="second"})})}).then(function(){t.dialogForm=Object(r["a"])({},t.dialogForm,{districtCode:t.houseInfo.districtCode})})},"dialogForm.isgroup":function(e){0==e&&(this.dialogForm.groupComponent=[])},"dialogForm.ishosted":function(e){0==e&&(this.dialogForm.hostedReasons="",this.dialogForm.hostedSituation="",this.dialogForm.hostedCorrectSituation="")},"dialogForm.isdraintube":function(e){0==e&&(this.dialogForm.draintubeReasons="",this.dialogForm.draintubeSituation="",this.dialogForm.draintubeCorrectSituation="")},"dialogForm.iscrimeagin":function(e){0==e&&(this.dialogForm.crimeagainName="")}},methods:{handleTreeData:function(e){var t=_.map(_.filter(e,function(e){return"0000"===e.code.slice(1,5)}),function(e){return{code:e.code,label:e.name,children:[]}});return _.map(t,function(t){t.children=_.map(_.filter(e,function(e){return e.code.slice(0,1)===t.code.slice(0,1)&&"0000"!==e.code.slice(1,5)&&"00"===e.code.slice(3,5)}),function(e){return{code:e.code,label:e.name,children:[]}})}),_.map(t,function(t){_.map(t.children,function(t){t.children=_.map(_.filter(e,function(e){return e.code.slice(0,3)===t.code.slice(0,3)&&"00"!==e.code.slice(3,5)}),function(e){return{code:e.code,label:e.name}})})}),t},handleCaseTypeTree:function(e){var t=_.map(_.filter(e,function(e){return"0000"===e.code.slice(2,6)}),function(e){return{code:e.code,label:e.name,children:[]}});return _.map(t,function(t){t.children=_.map(_.filter(e,function(e){return e.code.slice(0,2)===t.code.slice(0,2)&&"0000"!==e.code.slice(2,6)&&"00"===e.code.slice(4,6)}),function(e){return{code:e.code,label:e.name,children:[]}})}),_.map(t,function(t){_.map(t.children,function(t){t.children=_.map(_.filter(e,function(e){return e.code.slice(0,4)===t.code.slice(0,4)&&"00"!==e.code.slice(4,6)}),function(e){return{code:e.code,label:e.name}})})}),t},handlePosition:function(e){this.$refs["vPeoplePosition"].hujidi=e.domicilePlaceDetail,this.$refs["vPeoplePosition"].xianzhudi=e.livePlaceDetail,this.$refs["vPeoplePosition"].showHujiForm=!1,this.$refs["vPeoplePosition"].showXianzhuForm=!1},handleQueryBasePeople:function(e,t){s["a"].requestBasePeopleList(e,function(e){t&&t(e.list)})},submitForm:function(){var e=this;this.$refs["dialogForm"].validate(function(t){if(!t)return console.log("error submit!!"),!1;var o=_.cloneDeep(e.$refs["vBaseForm"].baseForm);if(o.birthDate=o.birthDate&&util.time.formatDate(o.birthDate,"YYYY-MM-DD"),o.occupationType=_.last(o.occupationType),o.districtCode=e.houseInfo.districtCode,1==e.$refs["vPeoplePosition"].showHujiForm){var i=e.$refs["vPeoplePosition"].$refs["houseItem"].positionForm;o.domicilePlace=i.province,o.domicilePlaceDetail=i.domicilePlaceDetail,o.houseId=i.houseId}if(1==e.$refs["vPeoplePosition"].showXianzhuForm){var a=e.$refs["vPeoplePosition"].$refs["liveHouseItem"].positionForm;o.livePlace=a.province,o.livePlaceDetail=a.domicilePlaceDetail,o.liveHouseId=a.houseId||""}o.dicMap&&delete o.dicMap,o.id?s["a"].requestUpdatePeopleInfo(o,function(t){e.comminForm(t)}):s["a"].requestSavePeopleInfo(o,function(t){e.comminForm(t)})})},comminForm:function(e){var t=this,o=_.cloneDeep(this.dialogForm);if(o.originalStartDate=o.originalStartDate&&util.time.formatDate(o.originalStartDate,"YYYY-MM-DD"),o.originalEndDate=o.originalEndDate&&util.time.formatDate(o.originalEndDate,"YYYY-MM-DD"),o.redressStartDate=o.redressStartDate&&util.time.formatDate(o.redressStartDate,"YYYY-MM-DD"),o.redressEndDate=o.redressEndDate&&util.time.formatDate(o.redressEndDate,"YYYY-MM-DD"),o.groupComponent=o.groupComponent.join(","),o.fourSituation=o.fourSituation.join(","),o.threeSituation=o.threeSituation.join(","),o.caseType=_.last(o.caseType),o.dicMap&&delete o.dicMap,1==this.isAdd)o.peopleId=e.id,s["a"].requestSaveCommPeople(o,function(e){t.$popup.showNotification({type:"success",message:"社区矫正人员添加成功！"}),t.resetForm(),t.$parent.handleQuery()});else{var i=_.pick(o,["caseType","crimeagainName","districtCode","draintubeCorrectSituation","draintubeReasons","draintubeSituation","fourSituation","groupComponent","hostedCorrectSituation","hostedReasons","hostedSituation","id","iscrimeagin","isdraintube","isgroup","ishosted","isrecidivist","originalEndDate","originalPrison","originalSentence","originalStartDate","penaltyChanges","peopleId","receiveMethod","redressEndDate","redressLiftedType","redressNum","redressStartDate","redressType","rewardsSituation","specificCharges","threeSituation"]);s["a"].requestUpdateCommPeople(i,function(e){t.$popup.showNotification({type:"success",message:"社区矫正人员修改成功！"}),t.resetForm(),t.$parent.handleQuery()})}},resetForm:function(){this.$refs["vBaseForm"].$refs["baseForm"].resetFields(),this.$refs["vBaseForm"].resetBaseForm(),this.$refs["dialogForm"].resetFields(),this.$refs["vPeoplePosition"].destroyedForm(),this.dialogForm={isrecidivist:0,isgroup:1,ishosted:0,isdraintube:0,iscrimeagin:0,groupComponent:[],fourSituation:[],threeSituation:[]},this.houseInfo={},this.$data.dialogVisible=!1,this.activeName="first",this.isAdd=!0}}},u=c,p=(o("c4f0"),o("2877")),m=Object(p["a"])(u,l,n,!1,null,null,null);m.options.__file="community-people-add.vue";var g=m.exports,h={components:{vAddDialog:g},data:function(){return{title:"社区矫正人员",queryForm:{districtCode:"",name:""},header:{"姓名":"name","原羁押场所":"originalPrison","矫正类别":"dicMap.redressType","案件类别":"dicMap.caseType","具体罪名":"specificCharges","矫正开始日期":"redressStartDate","矫正结束日期":"redressEndDate","矫正解除类型":"dicMap.redressLiftedType","是否有脱管":"dicMap.ishosted","是否有漏管":"dicMap.isdraintube","是否重新犯罪":"dicMap.iscrimeagin"},data:[],recordCount:0,disCodeOption:[],isShowCode:["6102"],dlgVisible:!1,configKey:"communityPeople"}},mounted:function(){var e=this;s["a"].requestGridCode(function(t){e.disCodeOption=[t],e.isShowCode=[t.code],e.queryForm.districtCode=t.code})},watch:{queryForm:{handler:function(e,t){this.handleQuery()},deep:!0}},methods:{handleTreeNode:function(e){this.queryForm.districtCode=e.code},handleAdd:function(){this.$refs["vAddDialog"].dialogVisible=!0,this.$refs["vAddDialog"].isAdd=!0,this.$refs["vAddDialog"].title="添加"+this.title},handleDelete:function(e){var t=this;this.$popup.showLoading("正在删除中，请稍候..."),new Promise(function(t,o){var i=0;_.map(e,function(o,a){s["a"].requestDeleteCommPeople(o.id,function(o){i++,i==e.length&&t()})})}).then(function(){t.$popup.showNotification({type:"success",message:"社区矫正人员删除成功！"}),t.handleQuery(),t.$popup.closeLoading()}).catch(function(){t.$popup.showNotification({type:"warning",message:"社区矫正人员删除失败！"}),t.$popup.closeLoading()})},handlePageChange:function(){this.data=[],this.handleQuery()},handleView:function(e,t){this.dlgVisible=!0,this.$nextTick(function(){this.$refs["details"].data=t,this.$refs["details"].visible=!0})},handleEdit:function(e,t){var o=this;this.$refs["vAddDialog"].dialogVisible=!0,this.$refs["vAddDialog"].isAdd=!1,this.$refs["vAddDialog"].title="修改"+this.title,s["a"].requestBasePeople(t.peopleId,function(e){if(null!=e.occupationType&&""!=e.occupationType){var t=[e.occupationType.substr(0,1)+"0000",e.occupationType.substr(0,3)+"00",e.occupationType];e.occupationType=_.uniq(t)}else e.occupationType=[];o.$refs["vAddDialog"].$refs["vBaseForm"].baseForm=e,o.$refs["vAddDialog"].handlePosition(e)});var i=_.cloneDeep(t);if(i.groupComponent=i.groupComponent&&i.groupComponent.split(",")||[],i.fourSituation=i.fourSituation&&i.fourSituation.split(",")||[],i.threeSituation=i.threeSituation&&i.threeSituation.split(",")||[],null!=i.caseType&&""!=i.caseType){var a=[i.caseType.substr(0,2)+"0000",i.caseType.substr(0,4)+"00",i.caseType];i.caseType=_.uniq(a)}else i.caseType=[];this.$refs["vAddDialog"].dialogForm=i},handleClear:function(){this.queryForm={districtCode:constants.REGION.CODE,name:""}},handleQuery:function(){var e=this,t=this.$refs["list"].getPageInfo();t=Object(r["a"])({},t,_.cloneDeep(this.queryForm)),s["a"].requestPageCommPeople(t,function(o){0!=o.totalCount&&0==o.list.length?(t.page=o.totalPage,s["a"].requestPageCommPeople(t,function(t){e.recordCount=t.totalCount,_.map(t.list,function(e){e.dicMap&&(e.dicMap.isrecidivist=1==e.isrecidivist?"是":"否",e.dicMap.isgroup=1==e.isgroup?"是":"否",e.dicMap.ishosted=1==e.ishosted?"是":"否",e.dicMap.isdraintube=1==e.isdraintube?"是":"否",e.dicMap.iscrimeagin=1==e.iscrimeagin?"是":"否")}),e.data=t.list})):(e.recordCount=o.totalCount,_.map(o.list,function(e){e.dicMap&&(e.dicMap.isrecidivist=1==e.isrecidivist?"是":"否",e.dicMap.isgroup=1==e.isgroup?"是":"否",e.dicMap.ishosted=1==e.ishosted?"是":"否",e.dicMap.isdraintube=1==e.isdraintube?"是":"否",e.dicMap.iscrimeagin=1==e.iscrimeagin?"是":"否")}),e.data=o.list)})}}},f=h,b=Object(p["a"])(f,i,a,!1,null,null,null);b.options.__file="community-people-list.vue";t["default"]=b.exports},c4f0:function(e,t,o){"use strict";var i=o("3ce7"),a=o.n(i);a.a},eeb1:function(e,t,o){"use strict";o("7f7f");var i=o("c93e"),a=o("9bd2"),r=o("ba4a"),s=Object(i["a"])({},r["a"],{requestSavePeopleInfo:function(e,t){Object(a["a"])({url:"/compre/hp/people/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdatePeopleInfo:function(e,t){Object(a["a"])({url:"/compre/hp/people/update",method:"post",data:e}).then(function(e){t(e)})},requestBasePeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/find?id="+e,method:"get"}).then(function(e){t(e)})},requestHouse:function(e){Object(a["a"])({url:"/compre/hp/house/findPage?page=1&pageSize=1000",method:"get"}).then(function(t){e(t)})},requestPageDrugsterPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/drugs/findPage?name="+e.name+"&districtCode="+e.districtCode+"&page="+e.page+"&pageSize="+e.pageSize,method:"get"}).then(function(e){t(e)})},requestSaveDrugsterPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/drugs/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdateDrugsterPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/drugs/update",method:"post",data:e}).then(function(e){t(e)})},requestDeleteDrugsterPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/drugs/delete?id="+e,method:"post"}).then(function(e){t(e)})},requestPageCommPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/comcor/findPage?name="+e.name+"&districtCode="+e.districtCode+"&page="+e.page+"&pageSize="+e.pageSize,method:"get"}).then(function(e){t(e)})},requestSaveCommPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/comcor/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdateCommPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/comcor/update",method:"post",data:e}).then(function(e){t(e)})},requestDeleteCommPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/comcor/delete?id="+e,method:"post"}).then(function(e){t(e)})},requestPageReleasedPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/release/findPage?name="+e.name+"&districtCode="+e.districtCode+"&page="+e.page+"&pageSize="+e.pageSize,method:"get"}).then(function(e){t(e)})},requestSaveReleasedPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/release/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdateReleasedPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/release/update",method:"post",data:e}).then(function(e){t(e)})},requestDeleteReleasedPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/release/delete?id="+e,method:"post"}).then(function(e){t(e)})},requestPagePsychoticPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/wrecker/findPage?name="+e.name+"&districtCode="+e.districtCode+"&page="+e.page+"&pageSize="+e.pageSize,method:"get"}).then(function(e){t(e)})},requestSavePsychoticPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/wrecker/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdatePsychoticPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/wrecker/update",method:"post",data:e}).then(function(e){t(e)})},requestDeletePsychoticPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/wrecker/delete?id="+e,method:"post"}).then(function(e){t(e)})},requestPageAidsPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/aids/findPage?name="+e.name+"&districtCode="+e.districtCode+"&page="+e.page+"&pageSize="+e.pageSize,method:"get"}).then(function(e){t(e)})},requestSaveAidsPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/aids/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdateAidsPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/aids/update",method:"post",data:e}).then(function(e){t(e)})},requestDeleteAidsPeople:function(e,t){Object(a["a"])({url:"/compre/hp/people/aids/delete?id="+e,method:"post"}).then(function(e){t(e)})}});t["a"]=s}}]);
//# sourceMappingURL=chunk-6fea.5bc03eeb.js.map