(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f97"],{"046f":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-list-page"},[a("techo-list",{ref:"list",attrs:{title:e.title,header:e.header,data:e.data,isShowCode:e.isShowCode,disCodeOption:e.disCodeOption,recordCount:e.recordCount},on:{onAdd:e.handleAdd,onPageChange:e.handlePageChange,onDelete:e.handleDelete,onView:e.handleView,onEdit:e.handleEdit,onTreeNode:e.handleTreeNode}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{staticClass:"techo-list__header-row",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:5}},[a("span",{staticClass:"techo-list__header-col-txt-4"},[e._v("涉及线路：")]),a("div",{staticClass:"techo-list__header-col-left-4"},[a("el-select",{attrs:{placeholder:"请选择涉及线路",size:"small",clearable:"",filterable:""},model:{value:e.queryForm.lineId,callback:function(t){e.$set(e.queryForm,"lineId",t)},expression:"queryForm.lineId"}},e._l(e.lineOption,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"techo-list__header-col-txt-4"},[e._v("案卷名称：")]),a("div",{staticClass:"techo-list__header-col-left-4"},[a("el-input",{staticClass:"techo-list__header-select-full",attrs:{placeholder:"请输入案件名称",maxlength:10,size:"small",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1)]),a("el-col",{attrs:{span:9}}),a("el-col",{staticClass:"techo-list__header-col-button",attrs:{span:5}},[a("el-button",{staticClass:"techo-list__header-button-reset",attrs:{size:"small"},on:{click:e.handleClear}},[e._v("清空")]),a("el-button",{staticClass:"techo-list__header-button-query",attrs:{size:"small"},on:{click:e.handleQuery}},[e._v("查询")])],1)],1)],1)]),e.dlgVisible?a("techo-details",{ref:"details",attrs:{configKey:e.configKey,title:e.title}}):e._e(),a("vAddDialog",{ref:"vAddDialog"})],1)},i=[],n=a("c6a4"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"add-dialog",attrs:{title:e.title,visible:e.dialogVisible,fullscreen:""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.resetForm}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"label-width":"160px",rules:e.rules}},[e.isAdd?a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"涉及路线",prop:"lineId"}},[a("el-select",{attrs:{placeholder:"请选择涉及路线",filterable:""},on:{change:e.handleChangeCode},model:{value:e.dialogForm.lineId,callback:function(t){e.$set(e.dialogForm,"lineId",t)},expression:"dialogForm.lineId"}},e._l(e.lineOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("线路id:"+e._s(t.id))])])}))],1)],1)],1):e._e(),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"案(事)件编号"}},[a("el-input",{attrs:{placeholder:"请填写案(事)件编号",maxlength:"20"},model:{value:e.dialogForm.caseNo,callback:function(t){e.$set(e.dialogForm,"caseNo",t)},expression:"dialogForm.caseNo"}})],1),a("el-form-item",{attrs:{label:"主犯(嫌疑人)证件类型",prop:"suspectsIdcode"}},[a("el-select",{attrs:{placeholder:"请选择证件类型"},model:{value:e.dialogForm.suspectsIdcode,callback:function(t){e.$set(e.dialogForm,"suspectsIdcode",t)},expression:"dialogForm.suspectsIdcode"}},e._l(e.dic["证件代码"],function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1),a("el-form-item",{attrs:{label:"发生日期",prop:"happenDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择发生日期"},model:{value:e.dialogForm.happenDate,callback:function(t){e.$set(e.dialogForm,"happenDate",t)},expression:"dialogForm.happenDate"}})],1),a("el-form-item",{attrs:{label:"作案人数"}},[a("el-input",{attrs:{placeholder:"请填写作案人数",maxlength:"200"},model:{value:e.dialogForm.casePeopleCount,callback:function(t){e.$set(e.dialogForm,"casePeopleCount",t)},expression:"dialogForm.casePeopleCount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"案(事)件名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请填写案(事)件名称",maxlength:"100"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"主犯(嫌疑人)证件号码",prop:"suspectsCardNo"}},[a("el-input",{attrs:{placeholder:"请填写主犯(嫌疑人)证件号码",maxlength:"50"},model:{value:e.dialogForm.suspectsCardNo,callback:function(t){e.$set(e.dialogForm,"suspectsCardNo",t)},expression:"dialogForm.suspectsCardNo"}})],1),a("el-form-item",{attrs:{label:"发生地点",prop:"happenPlace"}},[a("el-input",{attrs:{placeholder:"请填写发生地点",maxlength:"100"},model:{value:e.dialogForm.happenPlace,callback:function(t){e.$set(e.dialogForm,"happenPlace",t)},expression:"dialogForm.happenPlace"}})],1),a("el-form-item",{attrs:{label:"抓捕人数"}},[a("el-input",{attrs:{placeholder:"请填写抓捕人数",maxlength:"50"},model:{value:e.dialogForm.arrestCount,callback:function(t){e.$set(e.dialogForm,"arrestCount",t)},expression:"dialogForm.arrestCount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"案件性质",prop:"nature"}},[a("el-select",{attrs:{placeholder:"请选择案件性质"},model:{value:e.dialogForm.nature,callback:function(t){e.$set(e.dialogForm,"nature",t)},expression:"dialogForm.nature"}},e._l(e.dic["案件性质"],function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1),a("el-form-item",{attrs:{label:"主犯(嫌疑人)姓名",prop:"suspectsName"}},[a("el-input",{attrs:{placeholder:"主犯(嫌疑人)证件姓名",maxlength:"50"},model:{value:e.dialogForm.suspectsName,callback:function(t){e.$set(e.dialogForm,"suspectsName",t)},expression:"dialogForm.suspectsName"}})],1),a("el-form-item",{attrs:{label:"是否破案"}},[a("el-radio-group",{model:{value:e.dialogForm.isCaseSolve,callback:function(t){e.$set(e.dialogForm,"isCaseSolve",t)},expression:"dialogForm.isCaseSolve"}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),a("el-form-item",{attrs:{label:"在逃人数"}},[a("el-input",{attrs:{placeholder:"请填写在逃人数",maxlength:"50"},model:{value:e.dialogForm.escapedCount,callback:function(t){e.$set(e.dialogForm,"escapedCount",t)},expression:"dialogForm.escapedCount"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"案(事)件情况",prop:"caseDesc"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请填写治安隐患情况",maxlength:"4000"},model:{value:e.dialogForm.caseDesc,callback:function(t){e.$set(e.dialogForm,"caseDesc",t)},expression:"dialogForm.caseDesc"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"案件侦破情况",prop:"detectedDesc"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请填写治安隐患情况",maxlength:"4000"},model:{value:e.dialogForm.detectedDesc,callback:function(t){e.$set(e.dialogForm,"detectedDesc",t)},expression:"dialogForm.detectedDesc"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.resetForm}},[e._v("取消")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)},r=[],s=(a("7514"),a("7f7f"),a("ac6a"),a("cadf"),a("551c"),a("097d"),{data:function(){return{dialogVisible:!1,isAdd:!0,title:"",lineOption:[],dic:{"案件性质":[],"证件代码":[]},dialogForm:{isCaseSolve:0,districtCode:"",suspectsIdcode:"111"},rules:{lineId:[{required:!0,message:"请选择涉及线路",trigger:"change"}],name:[{required:!0,message:"请输入案卷名称",trigger:"blur"}],happenDate:[{required:!0,message:"请选择发生日期",trigger:"change"}],happenPlace:[{required:!0,message:"请输入发生地点",trigger:"blur"}],nature:[{required:!0,message:"请选择案(事)件性质",trigger:"change"}],caseDesc:[{required:!0,message:"请输入案(事)件情况",trigger:"blur"}],suspectsIdcode:[{required:!0,message:"请输入选择(嫌疑人)证件类型",trigger:"change"}],suspectsCardNo:[{required:!0,message:"请输入主犯(嫌疑人)证件号码",trigger:"blur"}],suspectsName:[{required:!0,message:"请输入主犯(嫌疑人)姓名",trigger:"blur"}],detectedDesc:[{required:!0,message:"请输入案件侦破情况",trigger:"blur"}]}}},created:function(){var e=this;n["a"].requestDicCatalog(function(t){var a=_.keys(e.dic);_.map(t,function(t){-1!=_.indexOf(a,t.name)&&n["a"].requestDicType(t.id,function(a){e.dic[t.name]=a})})})},watch:{"dialogForm.districtCode":{handler:function(e){var t=this;e&&n["a"].requestCodeByAddress(e,function(e){e.belongname?t.dialogForm.happenPlace=e.belongname+e.name:t.dialogForm.happenPlace="铜川市"})}}},methods:{handleChangeCode:function(e){if(e){var t=this.lineOption.find(function(t){return t.id==e}).districtCode;this.dialogForm.districtCode=t}},submitForm:function(){var e=this;this.$refs["dialogForm"].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=_.cloneDeep(e.dialogForm);a.dicMap&&delete a.dicMap,a.happenDate=util.time.formatDate(a.happenDate,"YYYY-MM-DD"),1==e.isAdd?n["a"].requestSaveLineCase(a,function(t){e.$popup.showNotification({type:"success",message:"案卷信息添加成功！"}),e.resetForm(),e.$parent.handleQuery()}):0==e.isAdd&&n["a"].requestUpdateLineCase(a,function(t){e.$popup.showNotification({type:"success",message:"案卷信息修改成功！"}),e.resetForm(),e.$parent.handleQuery()})})},resetForm:function(){this.$refs["dialogForm"].resetFields(),this.$data.dialogVisible=!1,this.isAdd=!0,this.dialogForm={isCaseSolve:0,districtCode:"",suspectsIdcode:"111"}}}}),c=s,d=(a("6655"),a("2877")),u=Object(d["a"])(c,l,r,!1,null,null,null);u.options.__file="lineroad-case-add.vue";var m=u.exports,p={components:{vAddDialog:m},data:function(){return{title:"案卷",queryForm:{districtCode:"",name:"",lineId:""},header:{"案(事)件名称":"name","发生日期":"happenDate","发生地点":"happenPlace","案(事)件性质":"dicMap.nature","主犯(嫌疑人)姓名":"suspectsName","是否破案":"dicMap.isCaseSolve"},data:[],recordCount:0,disCodeOption:[],lineOption:[],isShowCode:["6102"],dlgVisible:!1,configKey:"lineCase"}},mounted:function(){var e=this;n["a"].requestGridCode(function(t){e.disCodeOption=[t],e.isShowCode=[t.code],e.queryForm.districtCode=t.code}),n["a"].requestLineProteByCode(this.queryForm.districtCode,function(t){e.lineOption=t.list})},watch:{queryForm:{handler:function(e,t){this.handleQuery()},deep:!0},"queryForm.districtCode":{handler:function(e){var t=this;n["a"].requestLineProteByCode(e,function(e){t.lineOption=e.list})}}},methods:{handleTreeNode:function(e){this.queryForm.districtCode=e.code},handleAdd:function(){this.$refs["vAddDialog"].dialogVisible=!0,this.$refs["vAddDialog"].isAdd=!0,this.$refs["vAddDialog"].title="添加"+this.title,this.$refs["vAddDialog"].dialogForm.districtCode=this.queryForm.districtCode,this.$refs["vAddDialog"].lineOption=this.lineOption},handleDelete:function(e){var t=this;this.$popup.showLoading("正在删除中，请稍候..."),new Promise(function(t,a){var o=0;_.map(e,function(a,i){n["a"].requestDeleteLineCase(a.id,function(a){o++,o==e.length&&t()})})}).then(function(){t.$popup.showNotification({type:"success",message:"案卷删除成功！"}),t.handleQuery(),t.$popup.closeLoading()}).catch(function(){t.$popup.showNotification({type:"warning",message:"案卷删除失败！"}),t.$popup.closeLoading()})},handlePageChange:function(){this.data=[],this.handleQuery()},handleView:function(e,t){this.dlgVisible=!0,this.$nextTick(function(){this.$refs["details"].data=t,this.$refs["details"].visible=!0})},handleEdit:function(e,t){this.$refs["vAddDialog"].dialogVisible=!0,this.$refs["vAddDialog"].isAdd=!1,this.$refs["vAddDialog"].title="修改"+this.title,this.$refs["vAddDialog"].dialogForm=_.cloneDeep(t)},handleClear:function(){this.queryForm={districtCode:constants.REGION.CODE,name:""}},handleQuery:function(){var e=this,t=this.$refs["list"].getPageInfo();t.queryForm=_.cloneDeep(this.queryForm),n["a"].requestPageLineCase(t,function(a){0!=a.totalCount&&0==a.list.length?(t.page=a.totalPage,n["a"].requestPageLineCase(t,function(t){e.recordCount=t.totalCount,_.map(t.list,function(e){e.dicMap&&(e.dicMap.isCaseSolve=1==e.isCaseSolve?"是":"否")}),e.data=t.list})):(e.recordCount=a.totalCount,_.map(a.list,function(e){e.dicMap&&(e.dicMap.isCaseSolve=1==e.isCaseSolve?"是":"否")}),e.data=a.list)})}}},f=p,h=Object(d["a"])(f,o,i,!1,null,null,null);h.options.__file="lineroad-case-list.vue";t["default"]=h.exports},6655:function(e,t,a){"use strict";var o=a("e850"),i=a.n(o);i.a},ba4a:function(e,t,a){"use strict";a("7f7f");var o=a("9bd2"),i={requestGridCode:function(e){Object(o["a"])({url:"/grid/rstu/find/all/code",method:"get"}).then(function(t){t.region=_.sortBy(t.region,"code");var a=constants.REGION.CODE,o={code:a,label:constants.REGION.NAME,children:[]},i={};switch(a&&a.length){case 4:i=_.map(t.region,function(e){return{code:e.code,label:e.name,children:[]}}),_.map(i,function(e){e.children=_.map(_.filter(t.street,function(t){return t.code.indexOf(e.code)>=0}),function(e){return{code:e.code,label:e.name,children:[]}})}),_.map(i,function(e){_.map(e.children,function(e){e.children=_.map(_.filter(t.community,function(t){return t.code.indexOf(e.code)>=0}),function(e){return{code:e.code,label:e.name,children:[]}})})}),_.map(i,function(e){_.map(e.children,function(e){_.map(e.children,function(e){e.children=_.map(_.filter(t.unit,function(t){return t.code.indexOf(e.code)>=0}),function(e){return{code:e.code,label:e.name}})})})});break;case 6:i=_.map(_.filter(t.street,function(e){return e.code.indexOf(a)>=0}),function(e){return{code:e.code,label:e.name,children:[]}}),_.map(i,function(e){e.children=_.map(_.filter(t.community,function(t){return t.code.indexOf(e.code)>=0}),function(e){return{code:e.code,label:e.name,children:[]}})}),_.map(i,function(e){_.map(e.children,function(e){e.children=_.map(_.filter(t.unit,function(t){return t.code.indexOf(e.code)>=0}),function(e){return{code:e.code,label:e.name}})})});break;case 9:i=_.map(_.filter(t.community,function(e){return e.code.indexOf(a)>=0}),function(e){return{code:e.code,label:e.name,children:[]}}),_.map(i,function(e){e.children=_.map(_.filter(t.unit,function(t){return t.code.indexOf(e.code)>=0}),function(e){return{code:e.code,label:e.name}})});break;case 12:i=_.map(_.filter(t.unit,function(e){return e.code.indexOf(a)>=0}),function(e){return{code:e.code,label:e.name}});break;default:break}o.children=i,e(o)})},requestDicCatalog:function(e){Object(o["a"])({url:"/buss/info/dictionary/catalog/findAll",method:"get"}).then(function(t){e(t)})},requestDicType:function(e,t){Object(o["a"])({url:"/buss/info/dictionary/findDicByCatalogId?catalogId="+e,method:"get"}).then(function(e){t(e)})},requestByEntityNames:function(e,t){Object(o["a"])({url:"/compre/statis/common/district?districtCode="+e.districtCode+"&entityNames="+e.entityNames,method:"get"}).then(function(e){t(e)})},requestByFieldName:function(e,t){Object(o["a"])({url:"/compre/statis/common/field?districtCode="+e.districtCode+"&entityName="+e.entityName+"&fieldName="+e.fieldName,method:"get"}).then(function(e){t(e)})},requestByEntityAndFieldSum:function(e,t){Object(o["a"])({url:"/compre/statis/common/district/field/sum?districtCode="+e.districtCode+"&entityName="+e.entityName+"&fieldName="+e.fieldName,method:"get"}).then(function(e){t(e)})},requestFocusPeople:function(e,t){Object(o["a"])({url:"/compre/hp/people/find/compreInfo?id="+e,method:"get"}).then(function(e){t(e)})},requestFocus:function(e,t){Object(o["a"])({url:"/compre/"+e.entity+"/find?id="+e.focusId,method:"get"}).then(function(e){t(e)})}};t["a"]=i},c6a4:function(e,t,a){"use strict";a("7f7f");var o=a("c93e"),i=a("9bd2"),n=a("ba4a"),l=Object(o["a"])({},n["a"],{requestLine:function(e,t){Object(i["a"])({url:"/compre/peace/roadline/find?id="+e,method:"get"}).then(function(e){t(e)})},requestPageLineProte:function(e,t){Object(i["a"])({url:"/compre/peace/roadline/findPage?name="+e.queryForm.name+"&districtCode="+e.queryForm.districtCode+"&page="+e.page+"&pageSize="+e.pageSize,method:"get"}).then(function(e){t(e)})},requestLineProteByCode:function(e,t){Object(i["a"])({url:"/compre/peace/roadline/findPage?&districtCode="+e,method:"get"}).then(function(e){t(e)})},requestSaveLineProte:function(e,t){Object(i["a"])({url:"/compre/peace/roadline/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdateLineProte:function(e,t){Object(i["a"])({url:"/compre/peace/roadline/update",method:"post",data:e}).then(function(e){t(e)})},requestDeleteLineProte:function(e,t){Object(i["a"])({url:"/compre/peace/roadline/delete?id="+e,method:"post"}).then(function(e){t(e)})},requestPageLineCase:function(e,t){Object(i["a"])({url:"/compre/peace/case/findPage?name="+e.queryForm.name+"&districtCode="+e.queryForm.districtCode+"&lineId="+e.queryForm.lineId+"&page="+e.page+"&pageSize="+e.pageSize,method:"get"}).then(function(e){t(e)})},requestSaveLineCase:function(e,t){Object(i["a"])({url:"/compre/peace/case/save",method:"post",data:e}).then(function(e){t(e)})},requestUpdateLineCase:function(e,t){Object(i["a"])({url:"/compre/peace/case/update",method:"post",data:e}).then(function(e){t(e)})},requestDeleteLineCase:function(e,t){Object(i["a"])({url:"/compre/peace/case/delete?id="+e,method:"post"}).then(function(e){t(e)})}});t["a"]=l},e850:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6f97.f83c2330.js.map